rule all:
    input:
        expand(
            "results/sample_size/{n}/replicate_{i}.{ext}",
            n=[10],
            i=[2, 4, 16, 32, 64],
            ext=["csv", "tree"],
        ),


rule run_sim:
    output:
        out="results/sample_size/{n}/replicate_{i}.csv",
        tree="results/sample_size/{n}/replicate_{i}.tree",
    threads: 2
    shell:
        """
        ./simulator/target/release/simulator \
            -n {wildcards.n} \
            -N 100000 \
            -b {wildcards.i} \
            -g 10240 \
            -u 0.004 \
            -r \
            -a {output.out} \
            -o {output.tree}
        """
